(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{6024:function(e,r,s){Promise.resolve().then(s.bind(s,5229))},6463:function(e,r,s){"use strict";var a=s(1169);s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(r,{useSearchParams:function(){return a.useSearchParams}})},5229:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return n}});var a=s(7437),t=s(2265),l=s(6463);function n(){let[e,r]=(0,t.useState)([]),[s,n]=(0,t.useState)({name:"",email:"",phone:"",address:"",paymentMethod:"COD"}),[o,c]=(0,t.useState)(!1),[d,i]=(0,t.useState)(""),u=(0,l.useRouter)();(0,t.useEffect)(()=>{r(JSON.parse(localStorage.getItem("cart")||"[]"))},[]);let m=(s,a)=>{let t=e.map(e=>e.product===s?{...e,qty:Math.max(1,a)}:e);r(t),localStorage.setItem("cart",JSON.stringify(t))},h=s=>{let a=e.filter(e=>e.product!==s);r(a),localStorage.setItem("cart",JSON.stringify(a))},p=e.reduce((e,r)=>e+r.price*r.qty,0),x=async()=>{if(i(""),!s.name||!s.email||!s.phone||!s.address){i("Please fill all required fields");return}c(!0);try{let a=await fetch("/api/order/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e.map(e=>({product:e.product,qty:e.qty})),...s})}),t=await a.json();t.ok?(localStorage.removeItem("cart"),r([]),u.push("/order/success?order=".concat(t.orderId))):i("Error: "+t.error)}catch(e){i("Failed to place order")}c(!1)};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center mb-8",children:"Checkout"}),0===e.length?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xl text-gray-600",children:"Your cart is empty"}),(0,a.jsx)("a",{href:"/products",className:"mt-4 inline-block bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600",children:"Shop Now"})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Order Summary"}),(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium",children:e.title}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Rs. ",e.price," each"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>m(e.product,e.qty-1),className:"bg-gray-200 px-2 py-1 rounded",children:"-"}),(0,a.jsx)("span",{className:"px-3",children:e.qty}),(0,a.jsx)("button",{onClick:()=>m(e.product,e.qty+1),className:"bg-gray-200 px-2 py-1 rounded",children:"+"}),(0,a.jsx)("button",{onClick:()=>h(e.product),className:"text-red-500 ml-2",children:"Remove"})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"font-semibold",children:["Rs. ",e.price*e.qty]})})]},e.product))}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between text-xl font-bold",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{children:["Rs. ",p]})]})})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Billing Information"}),d&&(0,a.jsx)("p",{className:"text-red-500 mb-4",children:d}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Full Name *",value:s.name,onChange:e=>n({...s,name:e.target.value}),className:"w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,a.jsx)("input",{type:"email",placeholder:"Email *",value:s.email,onChange:e=>n({...s,email:e.target.value}),className:"w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,a.jsx)("input",{type:"tel",placeholder:"Phone *",value:s.phone,onChange:e=>n({...s,phone:e.target.value}),className:"w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,a.jsx)("textarea",{placeholder:"Address *",value:s.address,onChange:e=>n({...s,address:e.target.value}),className:"w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"4",required:!0}),(0,a.jsxs)("select",{value:s.paymentMethod,onChange:e=>n({...s,paymentMethod:e.target.value}),className:"w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"COD",children:"Cash on Delivery"}),(0,a.jsx)("option",{value:"Online",children:"Online Payment (Coming Soon)"})]}),(0,a.jsx)("button",{onClick:x,disabled:o,className:"w-full bg-blue-500 text-white p-3 rounded hover:bg-blue-600 disabled:bg-gray-400",children:o?"Placing Order...":"Place Order"})]})]})]})]})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6024)}),_N_E=e.O()}]);